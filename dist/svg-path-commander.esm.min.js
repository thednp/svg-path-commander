// SVGPathCommander v0.1.7 | thednp Â© 2021 | MIT-License
const t={origin:null,decimals:4,round:1};class e{constructor(...t){return this.setIdentity(),t&&t.length&&this.setMatrixValue(t)}get isIdentity(){const t=this;return 1===t.m11&&0===t.m12&&0===t.m13&&0===t.m14&&0===t.m21&&1===t.m22&&0===t.m23&&0===t.m24&&0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m41&&0===t.m42&&0===t.m43&&1===t.m44}set isIdentity(t){this.isIdentity=t}get is2D(){const t=this;return 0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m43&&1===t.m44}set is2D(t){this.is2D=t}}const n=e.prototype;function r(t,n,r){const a=new e;return a.m41=t,a.e=t,a.m42=n,a.f=n,a.m43=r,a}function a(t,n,r){const a=new e,s=t*Math.PI/180,i=n*Math.PI/180,c=r*Math.PI/180,m=Math.cos(s),o=-Math.sin(s),u=Math.cos(i),l=-Math.sin(i),h=Math.cos(c),f=-Math.sin(c),y=u*h,x=-u*f;a.m11=y,a.a=y,a.m12=x,a.b=x,a.m13=l;const p=o*l*h+m*f;a.m21=p,a.c=p;const d=m*h-o*l*f;return a.m22=d,a.d=d,a.m23=-o*u,a.m31=o*f-m*l*h,a.m32=o*h+m*l*f,a.m33=m*u,a}function s(t,n,r,a){const s=new e,i=a*Math.PI/360,c=Math.sin(i),m=Math.cos(i),o=c*c,u=Math.sqrt(t*t+n*n+r*r);let l=0,h=0,f=1;0!==u&&(l=t/u,h=n/u,f=r/u);const y=l*l,x=h*h,p=f*f,d=1-2*(x+p)*o;s.m11=d,s.a=d;const M=2*(t*n*o+r*c*m);s.m12=M,s.b=M,s.m13=2*(t*r*o-n*c*m);const g=2*(n*t*o-r*c*m);s.m21=g,s.c=g;const A=1-2*(p+y)*o;return s.m22=A,s.d=A,s.m23=2*(n*r*o+t*c*m),s.m31=2*(r*t*o+n*c*m),s.m32=2*(r*n*o-t*c*m),s.m33=1-2*(y+x)*o,s.m14=0,s.m24=0,s.m34=0,s.m41=0,s.e=0,s.m42=0,s.f=0,s.m43=0,s.m44=1,s}function i(t,n,r){const a=new e;return a.m11=t,a.a=t,a.m22=n,a.d=n,a.m33=r,a}function c(t){const n=t*Math.PI/180,r=new e,a=Math.tan(n);return r.m21=a,r.c=a,r}function m(t){const n=t*Math.PI/180,r=new e,a=Math.tan(n);return r.m12=a,r.b=a,r}function o(t,n){const r=n.m11*t.m11+n.m12*t.m21+n.m13*t.m31+n.m14*t.m41,a=n.m11*t.m12+n.m12*t.m22+n.m13*t.m32+n.m14*t.m42,s=n.m11*t.m13+n.m12*t.m23+n.m13*t.m33+n.m14*t.m43,i=n.m11*t.m14+n.m12*t.m24+n.m13*t.m34+n.m14*t.m44,c=n.m21*t.m11+n.m22*t.m21+n.m23*t.m31+n.m24*t.m41,m=n.m21*t.m12+n.m22*t.m22+n.m23*t.m32+n.m24*t.m42,o=n.m21*t.m13+n.m22*t.m23+n.m23*t.m33+n.m24*t.m43,u=n.m21*t.m14+n.m22*t.m24+n.m23*t.m34+n.m24*t.m44,l=n.m31*t.m11+n.m32*t.m21+n.m33*t.m31+n.m34*t.m41,h=n.m31*t.m12+n.m32*t.m22+n.m33*t.m32+n.m34*t.m42,f=n.m31*t.m13+n.m32*t.m23+n.m33*t.m33+n.m34*t.m43,y=n.m31*t.m14+n.m32*t.m24+n.m33*t.m34+n.m34*t.m44,x=n.m41*t.m11+n.m42*t.m21+n.m43*t.m31+n.m44*t.m41,p=n.m41*t.m12+n.m42*t.m22+n.m43*t.m32+n.m44*t.m42,d=n.m41*t.m13+n.m42*t.m23+n.m43*t.m33+n.m44*t.m43,M=n.m41*t.m14+n.m42*t.m24+n.m43*t.m34+n.m44*t.m44;return new e([r,c,l,x,a,m,h,p,s,o,f,d,i,u,y,M])}function u(t,e){const n=Array.from(e);if(16===n.length){const[e,r,a,s,i,c,m,o,u,l,h,f,y,x,p,d]=n;t.m11=e,t.a=e,t.m21=r,t.c=r,t.m31=a,t.m41=s,t.e=s,t.m12=i,t.b=i,t.m22=c,t.d=c,t.m32=m,t.m42=o,t.f=o,t.m13=u,t.m23=l,t.m33=h,t.m43=f,t.m14=y,t.m24=x,t.m34=p,t.m44=d}else{if(6!==n.length)throw new TypeError("CSSMatrix: expecting a 6/16 values Array");{const[e,r,a,s,i,c]=n;t.m11=e,t.a=e,t.m12=r,t.b=r,t.m21=a,t.c=a,t.m22=s,t.d=s,t.m14=i,t.e=i,t.m24=c,t.f=c}}return t}n.setMatrixValue=function(t){const n=this;if(!t||!t.length)return n;if(t.length&&"string"==typeof t[0]&&t[0].length){const e=String(t[0]).trim();let r="",a=[];if("none"===e)return n;if(r=e.slice(0,e.indexOf("(")),a=e.slice("matrix"===r?7:9,-1).split(",").map(t=>Math.abs(t)<1e-6?0:+t),!([6,16].indexOf(a.length)>-1))throw new TypeError("CSSMatrix: expecting valid CSS matrix() / matrix3d() syntax");u(n,a)}else t[0]instanceof e?u(n,t[0].toArray()):Array.isArray(t[0])?u(n,t[0]):Array.isArray(t)&&u(n,t);return n},n.toString=function(){return`${this.is2D?"matrix":"matrix3d"}(${this.toArray(1).join(",")})`},n.toArray=function(t){const e=this;let n;return n=e.is2D?[e.a,e.b,e.c,e.d,e.e,e.f]:t?[e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44]:[e.m11,e.m21,e.m31,e.m41,e.m12,e.m22,e.m32,e.m42,e.m13,e.m23,e.m33,e.m43,e.m14,e.m24,e.m34,e.m44],n},n.multiply=function(t){return o(this,t)},n.translate=function(t,e,n){let a=e,s=n;return null==s&&(s=0),null==a&&(a=0),o(this,r(t,a,s))},n.scale=function(t,e,n){let r=e,a=n;return null==r&&(r=t),null==a&&(a=t),o(this,i(t,r,a))},n.rotate=function(t,e,n){let r=t,s=e,i=n;return null==s&&(s=0),null==i&&(i=r,r=0),o(this,a(r,s,i))},n.rotateAxisAngle=function(t,e,n,r){if(4!==arguments.length)throw new TypeError("CSSMatrix: expecting 4 values");return o(this,s(t,e,n,r))},n.skewX=function(t){return o(this,c(t))},n.skewY=function(t){return o(this,m(t))},n.setIdentity=function(){return u(this,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},n.transformPoint=function(t){let e=r(t.x,t.y,t.z);return e.m44=t.w||1,e=this.multiply(e),{x:e.m41,y:e.m42,z:e.m43,w:e.m44}},n.transform=function(t){const e=this,n=e.m11*t.x+e.m12*t.y+e.m13*t.z+e.m14*t.w,r=e.m21*t.x+e.m22*t.y+e.m23*t.z+e.m24*t.w,a=e.m31*t.x+e.m32*t.y+e.m33*t.z+e.m34*t.w,s=e.m41*t.x+e.m42*t.y+e.m43*t.z+e.m44*t.w;return{x:n/s,y:r/s,z:a/s,w:s}},e.Translate=r,e.Rotate=a,e.RotateAxisAngle=s,e.Scale=i,e.SkewX=c,e.SkewY=m,e.Multiply=o,e.fromMatrix=function(t){return new e([t.m11,t.m21,t.m31,t.m41,t.m12,t.m22,t.m32,t.m42,t.m13,t.m23,t.m33,t.m43,t.m14,t.m24,t.m34,t.m44])},e.fromArray=function(t){return u(new e,t)},e.feedFromArray=u;const l="undefined"!=typeof DOMMatrix?DOMMatrix:e;function h(t){return t.map(t=>Array.isArray(t)?h(t):Number.isNaN(+t)?t:+t)}function f(e,n){const r=Number.isNaN(+n)?t.round&&t.decimals:+n;let a;return a=r?e.map(t=>t.map(t=>{const e=+t,n=10**r;return e?e%1==0?e:Math.round(e*n)/n:t})):h(e),a}function y(t,e,n){if(t[n].length>7){t[n].shift();const r=t[n];let a=n;for(;r.length;)e[n]="A",t.splice(a+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}var x={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function p(t){return Array.isArray(t)&&t.every(t=>{const e=t[0].toLowerCase();return x[e]===t.length-1&&/[achlmrqstvz]/g.test(e)})}function d(t){return p(t)&&t.slice(1).every(t=>"C"===t[0])}function M(t){let e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;if("m"===n&&r.length>2&&(t.segments.push([e,r[0],r[1]]),r=r.slice(2),n="l",e="m"===e?"l":"L"),"r"===n)t.segments.push([e].concat(r));else for(;r.length>=x[n]&&(t.segments.push([e].concat(r.splice(0,x[n]))),x[n]););}function g(t){const e=t.pathValue.charCodeAt(t.index);return 48===e?(t.param=0,void(t.index+=1)):49===e?(t.param=1,void(t.index+=1)):void(t.err="Invalid path value: invalid Arc flag "+e)}function A(t){return t>=48&&t<=57}function b(t){const e=t.index,{max:n}=t;let r,a=e,s=!1,i=!1,c=!1,m=!1;if(a>=n)t.err="Invalid path value: missing param "+t.pathValue[a];else if(r=t.pathValue.charCodeAt(a),43!==r&&45!==r||(a+=1,r=a<n?t.pathValue.charCodeAt(a):0),A(r)||46===r){if(46!==r){if(s=48===r,a+=1,r=a<n?t.pathValue.charCodeAt(a):0,s&&a<n&&r&&A(r))return void(t.err=`Invalid path value: ${t.pathValue[e]} illegal number`);for(;a<n&&A(t.pathValue.charCodeAt(a));)a+=1,i=!0;r=a<n?t.pathValue.charCodeAt(a):0}if(46===r){for(m=!0,a+=1;A(t.pathValue.charCodeAt(a));)a+=1,c=!0;r=a<n?t.pathValue.charCodeAt(a):0}if(101===r||69===r){if(m&&!i&&!c)return void(t.err=`Invalid path value: ${t.pathValue[a]} invalid float exponent`);if(a+=1,r=a<n?t.pathValue.charCodeAt(a):0,43!==r&&45!==r||(a+=1),!(a<n&&A(t.pathValue.charCodeAt(a))))return void(t.err=`Invalid path value: ${t.pathValue[a]} invalid float exponent`);for(;a<n&&A(t.pathValue.charCodeAt(a));)a+=1}t.index=a,t.param=+t.pathValue.slice(e,a)}else t.err=`Invalid path value at index ${a}: ${t.pathValue[a]} is not a number`}function w(t){for(;t.index<t.max&&(10===(e=t.pathValue.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0);)t.index+=1;var e}function v(t){return t>=48&&t<=57||43===t||45===t||46===t}function C(t){const{max:e}=t,n=t.pathValue.charCodeAt(t.index),r=x[t.pathValue[t.index].toLowerCase()];if(t.segmentStart=t.index,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0;default:return!1}}(n))if(t.index+=1,w(t),t.data=[],r){for(;;){for(let a=r;a>0;a-=1){if(97!=(32|n)||3!==a&&4!==a?b(t):g(t),t.err.length)return;t.data.push(t.param),w(t),t.index<e&&44===t.pathValue.charCodeAt(t.index)&&(t.index+=1,w(t))}if(t.index>=t.max)break;if(!v(t.pathValue.charCodeAt(t.index)))break}M(t)}else M(t);else t.err=`Invalid path value: ${t.pathValue[t.index]} not a path command`}function q(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}function V(t,e){if(p(t))return h(t);const n=new q(t);for(w(n);n.index<n.max&&!n.err.length;)C(n);return n.err.length?n.segments=[]:n.segments.length&&("mM".indexOf(n.segments[0][0])<0?(n.err="Invalid path value: missing M/m",n.segments=[]):n.segments[0][0]="M"),f(n.segments,e)}function k(t){return p(t)&&t.every(t=>t[0]===t[0].toUpperCase())}function P(t,e){if(k(t))return h(t);const n=V(t,e),r=n.length,a=[];let s=0,i=0,c=0,m=0,o=0;"M"===n[0][0]&&(s=+n[0][1],i=+n[0][2],c=s,m=i,o+=1,a.push(["M",s,i]));for(let t=o;t<r;t+=1){const e=n[t],[r]=e,o=r.toUpperCase(),u=[];let l=[];if(a.push(u),r!==o)switch(u[0]=o,o){case"A":l=e.slice(1,-2).concat([+e[6]+s,+e[7]+i]);for(let t=0;t<l.length;t+=1)u.push(l[t]);break;case"V":u[1]=+e[1]+i;break;case"H":u[1]=+e[1]+s;break;default:"M"===o&&(c=+e[1]+s,m=+e[2]+i);for(let t=1;t<e.length;t+=1)u.push(+e[t]+(t%2?s:i))}else for(let t=0;t<e.length;t+=1)u.push(e[t]);const h=u.length;switch(o){case"Z":s=c,i=m;break;case"H":s=+u[1];break;case"V":i=+u[1];break;default:s=+u[h-2],i=+u[h-1],"M"===o&&(c=s,m=i)}}return f(a,e)}function I(t,e,n){const[r]=t,a=t.slice(1);let s=t;if("TQ".indexOf(t[0])<0&&(e.qx=null,e.qy=null),"H"===r)s=["L",t[1],e.y1];else if("V"===r)s=["L",e.x1,t[1]];else if("S"===r){const{x1:t,y1:r}=function(t,e,n,r,a){return"CS".indexOf(a)>-1?{x1:2*t-n,y1:2*e-r}:{x1:t,y1:e}}(e.x1,e.y1,e.x2,e.y2,n);e.x1=t,e.y1=r,s=["C",t,r].concat(a)}else if("T"===r){const{qx:t,qy:r}=function(t,e,n,r,a){return"QT".indexOf(a)>-1?{qx:2*t-n,qy:2*e-r}:{qx:t,qy:e}}(e.x1,e.y1,e.qx,e.qy,n);e.qx=t,e.qy=r,s=["Q",t,r].concat(a)}else if("Q"===r){const[t,n]=a;e.qx=t,e.qy=n}return s}function S(t){return Array.isArray(t)&&t.every(t=>{const e=t[0].toLowerCase();return x[e]===t.length-1&&/[ACLMQZ]/.test(t[0])})}function N(t,e){if(S(t))return h(t);const n=P(t,e),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},a=[],s=n.length;let i,c,m="";for(let t=0;t<s;t+=1){const[e]=n[t];a[t]=e,t&&(m=a[t-1]),n[t]=I(n[t],r,m),i=n[t],c=i.length,r.x1=+i[c-2],r.y1=+i[c-1],r.x2=+i[c-4]||r.x1,r.y2=+i[c-3]||r.y1}return f(n,e)}function z(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function T(t,e,n,r,a,s,i,c,m,o){const u=120*Math.PI/180,l=Math.PI/180*(a||0);let h,f,y,x,p,d=[],M=t,g=c,A=e,b=m,w=n,v=r;if(o){const[t,e,n,r]=o;f=t,y=e,x=n,p=r}else{h=z(M,A,-l),M=h.x,A=h.y,h=z(g,b,-l),g=h.x,b=h.y;const t=(M-g)/2,e=(A-b)/2;let n=t*t/(w*v)+e**2/v**2;n>1&&(n=Math.sqrt(n),w*=n,v*=n);const r=w**2,a=v**2,c=(s===i?-1:1)*Math.sqrt(Math.abs((r*a-r*e*e-a*t*t)/(r*e*e+a*t*t)));x=c*w*e/v+(M+g)/2,p=c*-v*t/w+(A+b)/2,f=Math.asin(((A-p)/v*10**9>>0)/10**9),y=Math.asin(((b-p)/v*10**9>>0)/10**9),f=M<x?Math.PI-f:f,y=g<x?Math.PI-y:y,f<0&&(f=2*Math.PI+f),y<0&&(y=2*Math.PI+y),i&&f>y&&(f-=2*Math.PI),!i&&y>f&&(y-=2*Math.PI)}let C=y-f;if(Math.abs(C)>u){const t=y,e=g,n=b;y=f+u*(i&&y>f?1:-1),g=x+w*Math.cos(y),b=p+v*Math.sin(y),d=T(g,b,w,v,a,0,i,e,n,[y,t,x,p])}C=y-f;const q=Math.cos(f),V=Math.sin(f),k=Math.cos(y),P=Math.sin(y),I=Math.tan(C/4),S=4/3*w*I,N=4/3*v*I,L=[M,A],O=[M+S*V,A-N*q],D=[g+S*P,b-N*k],Q=[g,b];return O[0]=2*L[0]-O[0],O[1]=2*L[1]-O[1],o?[O,D,Q].concat(d):(d=[O,D,Q].concat(d).join().split(","),d.map((t,e)=>e%2?z(d[e-1],t,l).y:z(t,d[e+1],l).x))}function L(t,e,n,r,a,s){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*a+2/3*n,1/3*s+2/3*r,a,s]}function O(t,e,n,r,a,s,i,c,m){const o=1-m;return{x:o**3*t+o*o*3*m*n+3*o*m*m*a+m**3*i,y:o**3*e+o*o*3*m*r+3*o*m*m*s+m**3*c}}function D(t,e,n){const r=t[0],a=t[1];return[r+(e[0]-r)*n,a+(e[1]-a)*n]}function Q(t,e,n,r){const a=.5,s=[t,e],i=[n,r],c=D(s,i,a),m=D(i,c,a),o=D(c,m,a),u=D(m,o,a),l=D(o,u,a),h=O.apply(0,s.concat(c,o,l,a)),f=O.apply(0,l.concat(u,m,i,0));return[h.x,h.y,f.x,f.y,n,r]}function $(t,e){"TQ".indexOf(t[0])<0&&(e.qx=null,e.qy=null);const[n,r]=t.slice(1);switch(t[0]){case"M":return e.x=n,e.y=r,t;case"A":return["C"].concat(T.apply(0,[e.x1,e.y1].concat(t.slice(1))));case"Q":return e.qx=n,e.qy=r,["C"].concat(L.apply(0,[e.x1,e.y1].concat(t.slice(1))));case"L":return["C"].concat(Q(e.x1,e.y1,t[1],t[2]));case"Z":return["C"].concat(Q(e.x1,e.y1,e.x,e.y))}return t}function j(t,e){if(d(t))return h(t);const n=N(t,e),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},a=[];let s,i,c="",m=n.length;for(let t=0;t<m;t+=1)n[t]&&([c]=n[t]),a[t]=c,n[t]=$(n[t],r),y(n,a,t),m=n.length,s=n[t],i=s.length,r.x1=+s[i-2],r.y1=+s[i-1],r.x2=+s[i-4]||r.x1,r.y2=+s[i-3]||r.y1;return f(n,e)}function Z(t,e,n,r,a,s,i,c){return 3*((c-e)*(n+a)-(i-t)*(r+s)+r*(t-a)-n*(e-s)+c*(a+t/3)-i*(s+e/3))/20}function E(t,e){let n=0,r=0,a=0,s=0,i=0;return j(t,e).map(t=>{switch(t[0]){case"M":case"Z":return a="M"===t[0]?t[1]:a,s="M"===t[0]?t[2]:s,n=a,r=s,0;default:return i=Z.apply(0,[n,r].concat(t.slice(1))),[n,r]=t.slice(-2),i}}).reduce((t,e)=>t+e,0)}function H(t,e,n,r,a){return a*(a*(-3*t+9*e-9*n+3*r)+6*t-12*e+6*n)-3*t+3*e}function X(t,e,n,r,a,s,i,c,m){let o;(null===m||Number.isNaN(+m))&&(o=1),o>1&&(o=1),o<0&&(o=0);const u=o/2;let l=0,h=0,f=0,y=0;const x=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472];return[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach((m,o)=>{l=u*m+u,h=H(t,n,a,i,l),f=H(e,r,s,c,l),y+=x[o]*Math.sqrt(h*h+f*f)}),u*y}function R(t,e,n,r,a,s,i,c){let m=a-2*n+t-(i-2*a+n),o=2*(n-t)-2*(a-n),u=t-n,l=(-o+Math.sqrt(o*o-4*m*u))/2/m,h=(-o-Math.sqrt(o*o-4*m*u))/2/m;const f=[e,c],y=[t,i];let x;return Math.abs(l)>"1e12"&&(l=.5),Math.abs(h)>"1e12"&&(h=.5),l>0&&l<1&&(x=O(t,e,n,r,a,s,i,c,l),y.push(x.x),f.push(x.y)),h>0&&h<1&&(x=O(t,e,n,r,a,s,i,c,h),y.push(x.x),f.push(x.y)),m=s-2*r+e-(c-2*s+r),o=2*(r-e)-2*(s-r),u=e-r,l=(-o+Math.sqrt(o*o-4*m*u))/2/m,h=(-o-Math.sqrt(o*o-4*m*u))/2/m,Math.abs(l)>"1e12"&&(l=.5),Math.abs(h)>"1e12"&&(h=.5),l>0&&l<1&&(x=O(t,e,n,r,a,s,i,c,l),y.push(x.x),f.push(x.y)),h>0&&h<1&&(x=O(t,e,n,r,a,s,i,c,h),y.push(x.x),f.push(x.y)),{min:{x:Math.min.apply(0,y),y:Math.min.apply(0,f)},max:{x:Math.max.apply(0,y),y:Math.max.apply(0,f)}}}function Y(t,e){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};const n=j(t,e);let r=0,a=0,s=[],i=[];n.forEach(t=>{const[e,n]=t.slice(-2);if("M"===t[0])r=e,a=n,s.push(e),i.push(n);else{const c=R.apply(0,[r,a].concat(t.slice(1)));s=s.concat(c.min.x,c.max.x),i=i.concat(c.min.y,c.max.y),r=e,a=n}});const c=Math.min.apply(0,s),m=Math.min.apply(0,i),o=Math.max.apply(0,s),u=Math.max.apply(0,i),l=o-c,h=u-m;return{x:c,y:m,x2:o,y2:u,width:l,height:h,cx:c+l/2,cy:m+h/2}}function B(t){return p(t)&&t.slice(1).every(t=>t[0]===t[0].toLowerCase())}function U(t){return t.map(t=>t[0].concat(t.slice(1).join(" "))).join("")}function F(t){return U(P(t,0)).replace(/(m|M)/g,"|$1").split("|").map(t=>t.trim()).filter(t=>t)}function G(t,e){if(B(t))return h(t);const n=V(t,e),r=n.length,a=[];let s=0,i=0,c=0,m=0,o=0;"M"===n[0][0]&&(s=+n[0][1],i=+n[0][2],c=s,m=i,o+=1,a.push(["M",s,i]));for(let t=o;t<r;t+=1){const e=n[t],[r]=e,o=r.toLowerCase(),u=[];let l=[];if(a.push(u),r!==o)switch(u[0]=o,o){case"a":l=e.slice(1,-2).concat([+e[6]-s,+e[7]-i]);for(let t=0;t<l.length;t+=1)u.push(l[t]);break;case"v":u[1]=+e[1]-i;break;default:for(let t=1;t<e.length;t+=1)u.push(+e[t]-(t%2?s:i));"m"===o&&(c=+e[1],m=+e[2])}else{"m"===r&&(c=+e[1]+s,m=+e[2]+i);for(let t=0;t<e.length;t+=1)u.push(e[t])}const h=u.length;switch(u[0]){case"z":s=c,i=m;break;case"h":s+=u[h-1];break;case"v":i+=u[h-1];break;default:s+=a[t][h-2],i+=a[t][h-1]}}return f(a,e)}function J(t,e){const n=P(t,e),r=G(t,e);return n.map((t,e)=>e?t.join("").length<r[e].join("").length?t:r[e]:t)}function K(t,e){const n=P(t,e),r="Z"===n.slice(-1)[0][0];let a=[],s=0;return a=N(n,e).map((t,e)=>(s=t.length,{seg:n[e],n:t,c:n[e][0],x:t[s-2],y:t[s-1]})).map((t,e,n)=>{const a=t.seg,s=t.n,i=e&&n[e-1],c=n[e+1]&&n[e+1],m=t.c,o=n.length,u=e?n[e-1].x:n[o-1].x,l=e?n[e-1].y:n[o-1].y;let h=[];switch(m){case"M":h=r?["Z"]:[m,u,l];break;case"A":h=a.slice(0,-3).concat([1===a[5]?0:1,u,l]);break;case"C":h=c&&"S"===c.c?["S",a[1],a[2],u,l]:[m,a[3],a[4],a[1],a[2],u,l];break;case"S":h=i&&"CS".indexOf(i.c)>-1&&(!c||c&&"S"!==c.c)?["C",s[3],s[4],s[1],s[2],u,l]:[m,s[1],s[2],u,l];break;case"Q":h=c&&"T"===c.c?["T",u,l]:a.slice(0,-2).concat([u,l]);break;case"T":h=i&&"QT".indexOf(i.c)>-1&&(!c||c&&"T"!==c.c)?["Q",s[1],s[2],u,l]:[m,u,l];break;case"Z":h=["M",u,l];break;case"H":h=[m,u];break;case"V":h=[m,l];break;default:h=a.slice(0,-2).concat([u,l])}return h}),r?a.reverse():[a[0]].concat(a.slice(1).reverse())}function W(t){let e=new l;const{origin:n}=t,r=+n[0],a=+n[1],{translate:s}=t,{rotate:i}=t,{skew:c}=t,{scale:m}=t;return(!Number.isNaN(s)||Array.isArray(s)&&s.some(t=>0!=+t))&&(e=Array.isArray(s)?e.translate(+s[0]||0,+s[1]||0,+s[2]||0):e.translate(+s||0,0,0)),(i||c||m)&&(e=e.translate(+r,+a),i&&(e=Array.isArray(i)&&i.some(t=>0!=+t)?e.rotate(+i[0]||0,+i[1]||0,+i[2]||0):e.rotate(+i||0)),Array.isArray(c)&&c.some(t=>0!=+t)&&(Array.isArray(c)?(e=c[0]?e.skewX(+c[0]||0):e,e=c[1]?e.skewY(+c[1]||0):e):e=e.skewX(+c||0)),(!Number.isNaN(m)||Array.isArray(m)&&m.some(t=>1!=+t))&&(e=Array.isArray(m)?e.scale(+m[0]||1,+m[1]||1,+m[2]||1):e.scale(+m||1)),e=e.translate(-r,-a)),e}function _(t,e,n){const r=t.transformPoint({x:e[0],y:e[1],z:0,w:1}),a=n[0]||0,s=n[1]||0,i=n[2]||0,c=r.x-a,m=r.y-s,o=r.z-i;return[c*(Math.abs(i)/Math.abs(o))+a,m*(Math.abs(i)/Math.abs(o))+s]}function tt(t,e,n){let r,a,s,i,c,m,o,u,l;const x=P(t),p=N(x),d=W(e),M=Object.keys(e),{origin:g}=e,{a:A,b:b,c:w,d:v,e:C,f:q}=d,V=[A,b,w,v,C,q],k={x1:0,y1:0,x2:0,y2:0,x:0,y:0};let I=[],S=0,z="",T=[];const L=[];let O=[];if(!d.isIdentity){for(s=0,c=x.length;s<c;s+=1)I=x[s],x[s]&&([z]=I),L[s]=z,"A"!==z||d.is2D&&["skewX","skewY"].find(t=>M.includes(t))||(I=$(p[s],k),x[s]=$(p[s],k),y(x,L,s),p[s]=$(p[s],k),y(p,L,s),c=Math.max(x.length,p.length)),I=p[s],S=I.length,k.x1=+I[S-2],k.y1=+I[S-1],k.x2=+I[S-4]||k.x1,k.y2=+I[S-3]||k.y1,O={s:x[s],c:x[s][0]},"Z"!==z&&(O.x=k.x1,O.y=k.y1),T=T.concat(O);return T=T.map(t=>{switch(z=t.c,I=t.s,z){case"A":return l=function(t,e,n,r){const a=Math.cos(r*Math.PI/180),s=Math.sin(r*Math.PI/180),i=[e*(t[0]*a+t[2]*s),e*(t[1]*a+t[3]*s),n*(-t[0]*s+t[2]*a),n*(-t[1]*s+t[3]*a)],c=i[0]*i[0]+i[2]*i[2],m=i[1]*i[1]+i[3]*i[3];let o=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1]));const u=(c+m)/2;if(o<1e-9*u){const t=Math.sqrt(u);return{rx:t,ry:t,ax:0}}const l=i[0]*i[1]+i[2]*i[3];o=Math.sqrt(o);const h=u+o/2,f=u-o/2;let y,x,p=Math.abs(l)<1e-9&&Math.abs(h-m)<1e-9?90:Math.atan(Math.abs(l)>Math.abs(h-m)?(h-c)/l:l/(h-m)*180)/Math.PI;return p>=0?(y=Math.sqrt(h),x=Math.sqrt(f)):(p+=90,y=Math.sqrt(f),x=Math.sqrt(h)),{rx:y,ry:x,ax:p}}(V,I[1],I[2],I[3]),V[0]*V[3]-V[1]*V[2]<0&&(I[5]=+I[5]?0:1),[o,u]=_(d,[I[6],I[7]],g),I=r===o&&a===u||l.rx<1e-9*l.ry||l.ry<1e-9*l.rx?["L",o,u]:[z,l.rx,l.ry,l.ax,I[4],I[5],o,u],r=o,a=u,I;case"L":case"H":case"V":return[o,u]=_(d,[t.x,t.y],g),r!==o&&a!==u?I=["L",o,u]:a===u?I=["H",o]:r===o&&(I=["V",u]),r=o,a=u,I;default:for(i=1,m=I.length;i<m;i+=2)[r,a]=_(d,[I[i],I[i+1]],g),I[i]=r,I[i+1]=a;return I}}),f(T,n)}return h(x)}var et={CSSMatrix:l,parsePathString:V,isPathArray:p,isCurveArray:d,isAbsoluteArray:k,isRelativeArray:B,isNormalizedArray:S,pathToAbsolute:P,pathToRelative:G,pathToCurve:j,pathToString:U,getDrawDirection:function(t,e){return E(j(t,e))>=0},getPathArea:E,getPathBBox:Y,getPathLength:function(t,e){let n=0;return j(t,e).forEach((t,e,r)=>{n+="M"!==t[0]?X.apply(0,r[e-1].slice(-2).concat(t.slice(1))):0}),n},getPointAtLength:function(t,e){let n,r,a,s=0;return j(t,9).map((t,i,c)=>(r=i?c[i-1].slice(-2).concat(t.slice(1)):t.slice(1),n=i?X.apply(0,r):0,s+=n,a=0===i?{x:r[0],y:r[1]}:s>e&&e>s-n?O.apply(0,r.concat(1-(s-e)/n)):null,a)).filter(t=>t).slice(-1)[0]},clonePath:h,splitPath:F,roundPath:f,optimizePath:J,reverseCurve:function(t){const e=t.slice(1).map((e,n,r)=>n?r[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))).map(t=>t.map((e,n)=>t[t.length-n-2*(1-n%2)])).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(t=>["C"].concat(t.slice(2))))},reversePath:K,normalizePath:N,transformPath:tt,getSVGMatrix:W,options:t};class nt{constructor(e,n){const r=n||{},a=0==+r.round||!1===r.round?0:t.round,s=a&&(r.decimals||t.decimals),i=r.origin;this.round=0===a?0:s,this.origin=!i||Number.isNaN(i.x)||Number.isNaN(i.y)?null:i;const c=V(e,this.round);return this.segments=h(c),this.pathValue=e,this}}const rt=nt.prototype;rt.toAbsolute=function(){const t=P(this.segments,this.round);return this.segments=h(t),this},rt.toRelative=function(){const t=G(this.segments,this.round);return this.segments=h(t),this},rt.reverse=function(t){this.toAbsolute();const e=F(this.pathValue).length>1&&F(this.toString()),n=e&&h(e).map((e,n)=>t?n?K(e):V(e):K(e));let r=[];return r=e?n.flat(1):t?this.segments:K(this.segments,this.round),this.segments=h(r),this},rt.normalize=function(){const t=N(this.segments,this.round);return this.segments=h(t),this},rt.optimize=function(){const t=J(this.segments,this.round);return this.segments=h(t),this},rt.transform=function(t){const e=t||{};if(!e.origin){const t=Y(this.segments);e.origin=[t.cx,t.cy,t.cx]}const n=tt(this.segments,e,this.round);return this.segments=h(n),this},rt.flipX=function(){return this.transform({rotate:[180,0,0]}),this},rt.flipY=function(){return this.transform({rotate:[0,180,0]}),this},rt.toString=function(){return U(this.segments)},Object.keys(et).forEach(t=>{nt[t]=et[t]});export{nt as default};
