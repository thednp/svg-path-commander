(function(g,ee){typeof exports=="object"&&typeof module<"u"?ee(exports):typeof define=="function"&&define.amd?define(["exports"],ee):(g=typeof globalThis<"u"?globalThis:g||self,ee(g.SVGPathCommanderUtil={}))})(this,function(g){"use strict";var ee=Object.defineProperty,$t=(t,e,r)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V=(t,e,r)=>$t(t,typeof e!="symbol"?e+"":e,r);const jt={a:1,b:0,c:0,d:1,e:0,f:0,m11:1,m12:0,m13:0,m14:0,m21:0,m22:1,m23:0,m24:0,m31:0,m32:0,m33:1,m34:0,m41:0,m42:0,m43:0,m44:1,is2D:!0,isIdentity:!0},He=t=>(t instanceof Float64Array||t instanceof Float32Array||Array.isArray(t)&&t.every(e=>typeof e=="number"))&&[6,16].some(e=>t.length===e),Fe=t=>t instanceof DOMMatrix||t instanceof w||typeof t=="object"&&Object.keys(jt).every(e=>t&&e in t),te=t=>{const e=new w,r=Array.from(t);if(!He(r))throw TypeError(`CSSMatrix: "${r.join(",")}" must be an array with 6/16 numbers.`);if(r.length===16){const[o,n,i,s,a,c,l,u,h,f,y,m,d,M,p,A]=r;e.m11=o,e.a=o,e.m21=a,e.c=a,e.m31=h,e.m41=d,e.e=d,e.m12=n,e.b=n,e.m22=c,e.d=c,e.m32=f,e.m42=M,e.f=M,e.m13=i,e.m23=l,e.m33=y,e.m43=p,e.m14=s,e.m24=u,e.m34=m,e.m44=A}else if(r.length===6){const[o,n,i,s,a,c]=r;e.m11=o,e.a=o,e.m12=n,e.b=n,e.m21=i,e.c=i,e.m22=s,e.d=s,e.m41=a,e.e=a,e.m42=c,e.f=c}return e},Ue=t=>{if(Fe(t))return te([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a DOMMatrix / CSSMatrix / JSON compatible object.`)},Ge=t=>{if(typeof t!="string")throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a string.`);const e=String(t).replace(/\s/g,"");let r=new w;const o=`CSSMatrix: invalid transform string "${t}"`;return e.split(")").filter(n=>n).forEach(n=>{const[i,s]=n.split("(");if(!s)throw TypeError(o);const a=s.split(",").map(m=>m.includes("rad")?parseFloat(m)*(180/Math.PI):parseFloat(m)),[c,l,u,h]=a,f=[c,l,u],y=[c,l,u,h];if(i==="perspective"&&c&&[l,u].every(m=>m===void 0))r.m34=-1/c;else if(i.includes("matrix")&&[6,16].includes(a.length)&&a.every(m=>!Number.isNaN(+m))){const m=a.map(d=>Math.abs(d)<1e-6?0:d);r=r.multiply(te(m))}else if(i==="translate3d"&&f.every(m=>!Number.isNaN(+m)))r=r.translate(c,l,u);else if(i==="translate"&&c&&u===void 0)r=r.translate(c,l||0,0);else if(i==="rotate3d"&&y.every(m=>!Number.isNaN(+m))&&h)r=r.rotateAxisAngle(c,l,u,h);else if(i==="rotate"&&c&&[l,u].every(m=>m===void 0))r=r.rotate(0,0,c);else if(i==="scale3d"&&f.every(m=>!Number.isNaN(+m))&&f.some(m=>m!==1))r=r.scale(c,l,u);else if(i==="scale"&&!Number.isNaN(c)&&(c!==1||l!==1)&&u===void 0){const m=Number.isNaN(+l)?c:l;r=r.scale(c,m,1)}else if(i==="skew"&&(c||!Number.isNaN(c)&&l)&&u===void 0)r=r.skew(c,l||0);else if(["translate","rotate","scale","skew"].some(m=>i.includes(m))&&/[XYZ]/.test(i)&&c&&[l,u].every(m=>m===void 0))if(i==="skewX"||i==="skewY")r=r[i](c);else{const m=i.replace(/[XYZ]/,""),d=i.replace(m,""),M=["X","Y","Z"].indexOf(d),p=m==="scale"?1:0,A=[M===0?c:p,M===1?c:p,M===2?c:p];r=r[m](...A)}else throw TypeError(o)}),r},Se=(t,e)=>e?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],Je=(t,e,r)=>{const o=new w;return o.m41=t,o.e=t,o.m42=e,o.f=e,o.m43=r,o},Ke=(t,e,r)=>{const o=new w,n=Math.PI/180,i=t*n,s=e*n,a=r*n,c=Math.cos(i),l=-Math.sin(i),u=Math.cos(s),h=-Math.sin(s),f=Math.cos(a),y=-Math.sin(a),m=u*f,d=-u*y;o.m11=m,o.a=m,o.m12=d,o.b=d,o.m13=h;const M=l*h*f+c*y;o.m21=M,o.c=M;const p=c*f-l*h*y;return o.m22=p,o.d=p,o.m23=-l*u,o.m31=l*y-c*h*f,o.m32=l*f+c*h*y,o.m33=c*u,o},We=(t,e,r,o)=>{const n=new w,i=Math.sqrt(t*t+e*e+r*r);if(i===0)return n;const s=t/i,a=e/i,c=r/i,l=o*(Math.PI/360),u=Math.sin(l),h=Math.cos(l),f=u*u,y=s*s,m=a*a,d=c*c,M=1-2*(m+d)*f;n.m11=M,n.a=M;const p=2*(s*a*f+c*u*h);n.m12=p,n.b=p,n.m13=2*(s*c*f-a*u*h);const A=2*(a*s*f-c*u*h);n.m21=A,n.c=A;const b=1-2*(d+y)*f;return n.m22=b,n.d=b,n.m23=2*(a*c*f+s*u*h),n.m31=2*(c*s*f+a*u*h),n.m32=2*(c*a*f-s*u*h),n.m33=1-2*(y+m)*f,n},Xe=(t,e,r)=>{const o=new w;return o.m11=t,o.a=t,o.m22=e,o.d=e,o.m33=r,o},me=(t,e)=>{const r=new w;if(t){const o=t*Math.PI/180,n=Math.tan(o);r.m21=n,r.c=n}if(e){const o=e*Math.PI/180,n=Math.tan(o);r.m12=n,r.b=n}return r},Ye=t=>me(t,0),et=t=>me(0,t),B=(t,e)=>{const r=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,o=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,n=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,i=e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,s=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,a=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,c=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,l=e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,u=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,h=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,f=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,y=e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,m=e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,d=e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,M=e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,p=e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44;return te([r,o,n,i,s,a,c,l,u,h,f,y,m,d,M,p])};class w{constructor(e){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,e?this.setMatrixValue(e):this}get isIdentity(){return this.m11===1&&this.m12===0&&this.m13===0&&this.m14===0&&this.m21===0&&this.m22===1&&this.m23===0&&this.m24===0&&this.m31===0&&this.m32===0&&this.m33===1&&this.m34===0&&this.m41===0&&this.m42===0&&this.m43===0&&this.m44===1}get is2D(){return this.m31===0&&this.m32===0&&this.m33===1&&this.m34===0&&this.m43===0&&this.m44===1}setMatrixValue(e){return typeof e=="string"&&e.length&&e!=="none"?Ge(e):Array.isArray(e)||e instanceof Float64Array||e instanceof Float32Array?te(e):typeof e=="object"?Ue(e):this}toFloat32Array(e){return Float32Array.from(Se(this,e))}toFloat64Array(e){return Float64Array.from(Se(this,e))}toString(){const{is2D:e}=this,r=this.toFloat64Array(e).join(", ");return`${e?"matrix":"matrix3d"}(${r})`}toJSON(){const{is2D:e,isIdentity:r}=this;return{...this,is2D:e,isIdentity:r}}multiply(e){return B(this,e)}translate(e,r,o){const n=e;let i=r,s=o;return typeof i>"u"&&(i=0),typeof s>"u"&&(s=0),B(this,Je(n,i,s))}scale(e,r,o){const n=e;let i=r,s=o;return typeof i>"u"&&(i=e),typeof s>"u"&&(s=1),B(this,Xe(n,i,s))}rotate(e,r,o){let n=e,i=r||0,s=o||0;return typeof e=="number"&&typeof r>"u"&&typeof o>"u"&&(s=n,n=0,i=0),B(this,Ke(n,i,s))}rotateAxisAngle(e,r,o,n){if([e,r,o,n].some(i=>Number.isNaN(+i)))throw new TypeError("CSSMatrix: expecting 4 values");return B(this,We(e,r,o,n))}skewX(e){return B(this,Ye(e))}skewY(e){return B(this,et(e))}skew(e,r){return B(this,me(e,r))}transformPoint(e){const r=this.m11*e.x+this.m21*e.y+this.m31*e.z+this.m41*e.w,o=this.m12*e.x+this.m22*e.y+this.m32*e.z+this.m42*e.w,n=this.m13*e.x+this.m23*e.y+this.m33*e.z+this.m43*e.w,i=this.m14*e.x+this.m24*e.y+this.m34*e.z+this.m44*e.w;return e instanceof DOMPoint?new DOMPoint(r,o,n,i):{x:r,y:o,z:n,w:i}}}V(w,"Translate",Je),V(w,"Rotate",Ke),V(w,"RotateAxisAngle",We),V(w,"Scale",Xe),V(w,"SkewX",Ye),V(w,"SkewY",et),V(w,"Skew",me),V(w,"Multiply",B),V(w,"fromArray",te),V(w,"fromMatrix",Ue),V(w,"fromString",Ge),V(w,"toArray",Se),V(w,"isCompatibleArray",He),V(w,"isCompatibleObject",Fe);const Z=(t,e,r)=>{const[o,n]=t,[i,s]=e;return[o+(i-o)*r,n+(s-n)*r]},ue=(t,e)=>Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),ne=(t,e,r,o)=>ue([t,e],[r,o]),we=(t,e,r,o,n)=>{let i={x:t,y:e};if(typeof n=="number"){const s=ue([t,e],[r,o]);if(n<=0)i={x:t,y:e};else if(n>=s)i={x:r,y:o};else{const[a,c]=Z([t,e],[r,o],n/s);i={x:a,y:c}}}return i},Te=(t,e,r,o)=>{const{min:n,max:i}=Math;return[n(t,r),n(e,o),i(t,r),i(e,o)]},kt=Object.freeze(Object.defineProperty({__proto__:null,getLineBBox:Te,getLineLength:ne,getPointAtLineLength:we},Symbol.toStringTag,{value:"Module"})),Le=(t,e,r)=>{const o=r/2,n=Math.sin(o),i=Math.cos(o),s=t**2*n**2,a=e**2*i**2,c=Math.sqrt(s+a)*r;return Math.abs(c)},G=(t,e,r,o,n,i)=>{const{sin:s,cos:a}=Math,c=a(n),l=s(n),u=r*a(i),h=o*s(i);return[t+c*u-l*h,e+l*u+c*h]},Ne=(t,e)=>{const{x:r,y:o}=t,{x:n,y:i}=e,s=r*n+o*i,a=Math.sqrt((r**2+o**2)*(n**2+i**2));return(r*i-o*n<0?-1:1)*Math.acos(s/a)},he=(t,e,r,o,n,i,s,a,c)=>{const{abs:l,sin:u,cos:h,sqrt:f,PI:y}=Math;let m=l(r),d=l(o);const p=(n%360+360)%360*(y/180);if(t===a&&e===c)return{rx:m,ry:d,startAngle:0,endAngle:0,center:{x:a,y:c}};if(m===0||d===0)return{rx:m,ry:d,startAngle:0,endAngle:0,center:{x:(a+t)/2,y:(c+e)/2}};const A=(t-a)/2,b=(e-c)/2,x={x:h(p)*A+u(p)*b,y:-u(p)*A+h(p)*b},C=x.x**2/m**2+x.y**2/d**2;C>1&&(m*=f(C),d*=f(C));const S=m**2*d**2-m**2*x.y**2-d**2*x.x**2,q=m**2*x.y**2+d**2*x.x**2;let $=S/q;$=$<0?0:$;const v=(i!==s?1:-1)*f($),T={x:v*(m*x.y/d),y:v*(-(d*x.x)/m)},Q={x:h(p)*T.x-u(p)*T.y+(t+a)/2,y:u(p)*T.x+h(p)*T.y+(e+c)/2},J={x:(x.x-T.x)/m,y:(x.y-T.y)/d},j=Ne({x:1,y:0},J),P={x:(-x.x-T.x)/m,y:(-x.y-T.y)/d};let k=Ne(J,P);!s&&k>0?k-=2*y:s&&k<0&&(k+=2*y),k%=2*y;const D=j+k;return{center:Q,startAngle:j,endAngle:D,rx:m,ry:d}},ve=(t,e,r,o,n,i,s,a,c)=>{const{rx:l,ry:u,startAngle:h,endAngle:f}=he(t,e,r,o,n,i,s,a,c);return Le(l,u,f-h)},tt=(t,e,r,o,n,i,s,a,c,l)=>{let u={x:t,y:e};const{center:h,rx:f,ry:y,startAngle:m,endAngle:d}=he(t,e,r,o,n,i,s,a,c);if(typeof l=="number"){const M=Le(f,y,d-m);if(l<=0)u={x:t,y:e};else if(l>=M)u={x:a,y:c};else{if(t===a&&e===c)return{x:a,y:c};if(f===0||y===0)return we(t,e,a,c,l);const{PI:p,cos:A,sin:b}=Math,x=d-m,S=(n%360+360)%360*(p/180),q=m+x*(l/M),$=f*A(q),v=y*b(q);u={x:A(S)*$-b(S)*v+h.x,y:b(S)*$+A(S)*v+h.y}}}return u},nt=(t,e,r,o,n,i,s,a,c)=>{const{center:l,rx:u,ry:h,startAngle:f,endAngle:y}=he(t,e,r,o,n,i,s,a,c),m=y-f,{min:d,max:M,tan:p,atan2:A,PI:b}=Math,{x,y:C}=l,S=n*b/180,q=p(S),$=A(-h*q,u),v=$,T=$+b,Q=A(h,u*q),J=Q+b,j=[a],P=[c];let k=d(t,a),D=M(t,a),R=d(e,c),H=M(e,c);const Y=y-m*1e-5,K=G(x,C,u,h,S,Y),L=y-m*.99999,I=G(x,C,u,h,S,L);if(K[0]>D||I[0]>D){const z=G(x,C,u,h,S,v);j.push(z[0]),P.push(z[1])}if(K[0]<k||I[0]<k){const z=G(x,C,u,h,S,T);j.push(z[0]),P.push(z[1])}if(K[1]<R||I[1]<R){const z=G(x,C,u,h,S,J);j.push(z[0]),P.push(z[1])}if(K[1]>H||I[1]>H){const z=G(x,C,u,h,S,Q);j.push(z[0]),P.push(z[1])}return k=d.apply([],j),R=d.apply([],P),D=M.apply([],j),H=M.apply([],P),[k,R,D,H]},It=Object.freeze(Object.defineProperty({__proto__:null,angleBetween:Ne,arcLength:Le,arcPoint:G,getArcBBox:nt,getArcLength:ve,getArcProps:he,getPointAtArcLength:tt},Symbol.toStringTag,{value:"Module"})),ze=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],rt=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],ot=t=>{const e=[];for(let r=t,o=r.length,n=o-1;o>1;o-=1,n-=1){const i=[];for(let s=0;s<n;s+=1)i.push({x:n*(r[s+1].x-r[s].x),y:n*(r[s+1].y-r[s].y),t:0});e.push(i),r=i}return e},it=(t,e)=>{if(e===0)return t[0].t=0,t[0];const r=t.length-1;if(e===1)return t[r].t=1,t[r];const o=1-e;let n=t;if(r===0)return t[0].t=e,t[0];if(r===1)return{x:o*n[0].x+e*n[1].x,y:o*n[0].y+e*n[1].y,t:e};const i=o*o,s=e*e;let a=0,c=0,l=0,u=0;return r===2?(n=[n[0],n[1],n[2],{x:0,y:0}],a=i,c=o*e*2,l=s):r===3&&(a=i*o,c=i*e*3,l=o*s*3,u=e*s),{x:a*n[0].x+c*n[1].x+l*n[2].x+u*n[3].x,y:a*n[0].y+c*n[1].y+l*n[2].y+u*n[3].y,t:e}},st=(t,e)=>{const r=t(e),o=r.x*r.x+r.y*r.y;return Math.sqrt(o)},ct=t=>{const r=ze.length;let o=0;for(let n=0,i;n<r;n++)i=.5*ze[n]+.5,o+=rt[n]*st(t,i);return .5*o},re=t=>{const e=[];for(let o=0,n=t.length,i=2;o<n;o+=i)e.push({x:t[o],y:t[o+1]});const r=ot(e);return ct(o=>it(r[0],o))},at=1e-8,fe=([t,e,r])=>{const o=Math.min(t,r),n=Math.max(t,r);if(e>=t?r>=e:r<=e)return[o,n];const i=(t*r-e*e)/(t-2*e+r);return i<o?[i,n]:[o,i]},qe=([t,e,r,o])=>{const n=t-3*e+3*r-o;if(Math.abs(n)<at)return t===o&&t===e?[t,o]:fe([t,-.5*t+1.5*e,t-3*e+3*r]);const i=-t*r+t*o-e*r-e*o+e*e+r*r;if(i<=0)return[Math.min(t,o),Math.max(t,o)];const s=Math.sqrt(i);let a=Math.min(t,o),c=Math.max(t,o);const l=t-2*e+r;for(let u=(l+s)/n,h=1;h<=2;u=(l-s)/n,h++)if(u>0&&u<1){const f=t*(1-u)*(1-u)*(1-u)+e*3*(1-u)*(1-u)*u+r*3*(1-u)*u*u+o*u*u*u;f<a&&(a=f),f>c&&(c=f)}return[a,c]},Vt=Object.freeze(Object.defineProperty({__proto__:null,CBEZIER_MINMAX_EPSILON:at,Cvalues:rt,Tvalues:ze,bezierLength:ct,calculateBezier:st,computeBezier:it,deriveBezier:ot,getBezierLength:re,minmaxC:qe,minmaxQ:fe},Symbol.toStringTag,{value:"Module"})),lt=([t,e,r,o,n,i,s,a],c)=>{const l=1-c;return{x:l**3*t+3*l**2*c*r+3*l*c**2*n+c**3*s,y:l**3*e+3*l**2*c*o+3*l*c**2*i+c**3*a}},ye=(t,e,r,o,n,i,s,a)=>re([t,e,r,o,n,i,s,a]),mt=(t,e,r,o,n,i,s,a,c)=>{const l=typeof c=="number";let u={x:t,y:e};if(l){const h=re([t,e,r,o,n,i,s,a]);c<=0||(c>=h?u={x:s,y:a}:u=lt([t,e,r,o,n,i,s,a],c/h))}return u},$e=(t,e,r,o,n,i,s,a)=>{const c=qe([t,r,n,s]),l=qe([e,o,i,a]);return[c[0],l[0],c[1],l[1]]},Rt=Object.freeze(Object.defineProperty({__proto__:null,getCubicBBox:$e,getCubicLength:ye,getPointAtCubicLength:mt,getPointAtCubicSegmentLength:lt},Symbol.toStringTag,{value:"Module"})),ut=([t,e,r,o,n,i],s)=>{const a=1-s;return{x:a**2*t+2*a*s*r+s**2*n,y:a**2*e+2*a*s*o+s**2*i}},de=(t,e,r,o,n,i)=>re([t,e,r,o,n,i]),ht=(t,e,r,o,n,i,s)=>{const a=typeof s=="number";let c={x:t,y:e};if(a){const l=re([t,e,r,o,n,i]);s<=0||(s>=l?c={x:n,y:i}:c=ut([t,e,r,o,n,i],s/l))}return c},je=(t,e,r,o,n,i)=>{const s=fe([t,r,n]),a=fe([e,o,i]);return[s[0],a[0],s[1],a[1]]},Et=Object.freeze(Object.defineProperty({__proto__:null,getPointAtQuadLength:ht,getPointAtQuadSegmentLength:ut,getQuadBBox:je,getQuadLength:de},Symbol.toStringTag,{value:"Module"})),Ot=Object.freeze(Object.defineProperty({__proto__:null,polygonArea:t=>{const e=t.length;let r=-1,o,n=t[e-1],i=0;for(;++r<e;)o=n,n=t[r],i+=o[1]*n[0]-o[0]*n[1];return i/2},polygonLength:t=>t.reduce((e,r,o)=>o?e+ue(t[o-1],r):0,0)},Symbol.toStringTag,{value:"Module"})),W={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},ke=t=>{let e=t.pathValue[t.segmentStart],r=e.toLowerCase();const{data:o}=t;for(;o.length>=W[r]&&(r==="m"&&o.length>2?(t.segments.push([e].concat(o.splice(0,2))),r="l",e=e==="m"?"l":"L"):t.segments.push([e].concat(o.splice(0,W[r]))),!!W[r]););},O="SVGPathCommander Error",ft=t=>{const{index:e,pathValue:r}=t,o=r.charCodeAt(e);if(o===48){t.param=0,t.index+=1;return}if(o===49){t.param=1,t.index+=1;return}t.err=`${O}: invalid Arc flag "${r[e]}", expecting 0 or 1 at index ${e}`},F=t=>t>=48&&t<=57,U="Invalid path value",yt=t=>{const{max:e,pathValue:r,index:o}=t;let n=o,i=!1,s=!1,a=!1,c=!1,l;if(n>=e){t.err=`${O}: ${U} at index ${n}, "pathValue" is missing param`;return}if(l=r.charCodeAt(n),(l===43||l===45)&&(n+=1,l=r.charCodeAt(n)),!F(l)&&l!==46){t.err=`${O}: ${U} at index ${n}, "${r[n]}" is not a number`;return}if(l!==46){if(i=l===48,n+=1,l=r.charCodeAt(n),i&&n<e&&l&&F(l)){t.err=`${O}: ${U} at index ${o}, "${r[o]}" illegal number`;return}for(;n<e&&F(r.charCodeAt(n));)n+=1,s=!0;l=r.charCodeAt(n)}if(l===46){for(c=!0,n+=1;F(r.charCodeAt(n));)n+=1,a=!0;l=r.charCodeAt(n)}if(l===101||l===69){if(c&&!s&&!a){t.err=`${O}: ${U} at index ${n}, "${r[n]}" invalid float exponent`;return}if(n+=1,l=r.charCodeAt(n),(l===43||l===45)&&(n+=1),n<e&&F(r.charCodeAt(n)))for(;n<e&&F(r.charCodeAt(n));)n+=1;else{t.err=`${O}: ${U} at index ${n}, "${r[n]}" invalid integer exponent`;return}}t.index=n,t.param=+t.pathValue.slice(o,n)},dt=t=>[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279,10,13,8232,8233,32,9,11,12,160].includes(t),X=t=>{const{pathValue:e,max:r}=t;for(;t.index<r&&dt(e.charCodeAt(t.index));)t.index+=1},gt=t=>{switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}},bt=t=>F(t)||t===43||t===45||t===46,xt=t=>(t|32)===97,Mt=t=>{switch(t|32){case 109:case 77:return!0;default:return!1}},Ie=t=>{var c;const{max:e,pathValue:r,index:o,segments:n}=t,i=r.charCodeAt(o),s=W[r[o].toLowerCase()];if(t.segmentStart=o,!gt(i)){t.err=`${O}: ${U} "${r[o]}" is not a path command at index ${o}`;return}const a=n[n.length-1];if(!Mt(i)&&((c=a==null?void 0:a[0])==null?void 0:c.toLocaleLowerCase())==="z"){t.err=`${O}: ${U} "${r[o]}" is not a MoveTo path command at index ${o}`;return}if(t.index+=1,X(t),t.data=[],!s){ke(t);return}for(;;){for(let l=s;l>0;l-=1){if(xt(i)&&(l===3||l===4)?ft(t):yt(t),t.err.length)return;t.data.push(t.param),X(t),t.index<e&&r.charCodeAt(t.index)===44&&(t.index+=1,X(t))}if(t.index>=t.max||!bt(r.charCodeAt(t.index)))break}ke(t)};class Ve{constructor(e){this.segments=[],this.pathValue=e,this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}}const _=t=>{if(typeof t!="string")return t.slice(0);const e=new Ve(t);for(X(e);e.index<e.max&&!e.err.length;)Ie(e);if(!e.err.length)e.segments.length&&(e.segments[0][0]="M");else throw TypeError(e.err);return e.segments},oe=(t,e,r,o)=>{const[n]=t,i=n.toUpperCase();if(e===0||i===n)return t;if(i==="A")return[i,t[1],t[2],t[3],t[4],t[5],t[6]+r,t[7]+o];if(i==="V")return[i,t[1]+o];if(i==="H")return[i,t[1]+r];if(i==="L")return[i,t[1]+r,t[2]+o];{const a=[],c=t.length;for(let l=1;l<c;l+=1)a.push(t[l]+(l%2?r:o));return[i].concat(a)}},E=(t,e)=>{let r=t.length,o,n="M",i="M",s=!1,a=0,c=0,l=0,u=0,h=0;for(let f=0;f<r;f+=1){o=t[f],[n]=o,h=o.length,i=n.toUpperCase(),s=i!==n;const y=e(o,f,a,c);if(y===!1)break;i==="Z"?(a=l,c=u):i==="H"?a=o[1]+(s?a:0):i==="V"?c=o[1]+(s?c:0):(a=o[h-2]+(s?a:0),c=o[h-1]+(s?c:0),i==="M"&&(l=a,u=c)),y&&(t[f]=y,y[0]==="C"&&(r=t.length))}return t},Re=t=>{const e=_(t);return E(e,oe)},Ee=(t,e,r,o)=>{const[n]=t,i=n.toLowerCase();if(e===0||n===i)return t;if(i==="a")return[i,t[1],t[2],t[3],t[4],t[5],t[6]-r,t[7]-o];if(i==="v")return[i,t[1]-o];if(i==="h")return[i,t[1]-r];if(i==="l")return[i,t[1]-r,t[2]-o];{const a=[],c=t.length;for(let l=1;l<c;l+=1)a.push(t[l]-(l%2?r:o));return[i].concat(a)}},_t=t=>{const e=_(t);return E(e,Ee)},ie=(t,e,r)=>{const{sin:o,cos:n}=Math,i=t*n(r)-e*o(r),s=t*o(r)+e*n(r);return{x:i,y:s}},ge=(t,e,r,o,n,i,s,a,c,l)=>{let u=t,h=e,f=r,y=o,m=a,d=c;const M=Math.PI*120/180,p=Math.PI/180*(+n||0);let A=[],b,x,C,S,q;if(l)[x,C,S,q]=l;else{b=ie(u,h,-p),u=b.x,h=b.y,b=ie(m,d,-p),m=b.x,d=b.y;const L=(u-m)/2,I=(h-d)/2;let z=L*L/(f*f)+I*I/(y*y);z>1&&(z=Math.sqrt(z),f*=z,y*=z);const Ze=f*f,Be=y*y,qt=(i===s?-1:1)*Math.sqrt(Math.abs((Ze*Be-Ze*I*I-Be*L*L)/(Ze*I*I+Be*L*L)));S=qt*f*I/y+(u+m)/2,q=qt*-y*L/f+(h+d)/2,x=Math.asin(((h-q)/y*10**9>>0)/10**9),C=Math.asin(((d-q)/y*10**9>>0)/10**9),x=u<S?Math.PI-x:x,C=m<S?Math.PI-C:C,x<0&&(x=Math.PI*2+x),C<0&&(C=Math.PI*2+C),s&&x>C&&(x-=Math.PI*2),!s&&C>x&&(C-=Math.PI*2)}let $=C-x;if(Math.abs($)>M){const L=C,I=m,z=d;C=x+M*(s&&C>x?1:-1),m=S+f*Math.cos(C),d=q+y*Math.sin(C),A=ge(m,d,f,y,n,0,s,I,z,[C,L,S,q])}$=C-x;const v=Math.cos(x),T=Math.sin(x),Q=Math.cos(C),J=Math.sin(C),j=Math.tan($/4),P=4/3*f*j,k=4/3*y*j,D=[u,h],R=[u+P*T,h-k*v],H=[m+P*J,d-k*Q],Y=[m,d];if(R[0]=2*D[0]-R[0],R[1]=2*D[1]-R[1],l)return[R[0],R[1],H[0],H[1],Y[0],Y[1]].concat(A);A=[R[0],R[1],H[0],H[1],Y[0],Y[1]].concat(A);const K=[];for(let L=0,I=A.length;L<I;L+=1)K[L]=L%2?ie(A[L-1],A[L],p).y:ie(A[L],A[L+1],p).x;return K},pt=(t,e,r,o,n,i)=>{const s=.3333333333333333,a=2/3;return[s*t+a*r,s*e+a*o,s*n+a*r,s*i+a*o,n,i]},Oe=(t,e,r,o)=>{const n=Z([t,e],[r,o],.3333333333333333),i=Z([t,e],[r,o],2/3);return[n[0],n[1],i[0],i[1],r,o]},At=(t,e)=>{const[r]=t,o=t.slice(1).map(Number),[n,i]=o,{x1:s,y1:a,x:c,y:l}=e;return"TQ".includes(r)||(e.qx=null,e.qy=null),r==="M"?(e.x=n,e.y=i,t):r==="A"?["C"].concat(ge(s,a,o[0],o[1],o[2],o[3],o[4],o[5],o[6])):r==="Q"?(e.qx=n,e.qy=i,["C"].concat(pt(s,a,o[0],o[1],o[2],o[3]))):r==="L"?["C"].concat(Oe(s,a,n,i)):r==="Z"?["C"].concat(Oe(s,a,c,l)):t},be=(t,e)=>{const[r]=t,o=r.toUpperCase(),n=r!==o,{x1:i,y1:s,x2:a,y2:c,x:l,y:u}=e,h=t.slice(1);let f=h.map((y,m)=>y+(n?m%2?u:l:0));if("TQ".includes(o)||(e.qx=null,e.qy=null),o==="A")return f=h.slice(0,-2).concat(h[5]+(n?l:0),h[6]+(n?u:0)),["A"].concat(f);if(o==="H")return["L",t[1]+(n?l:0),s];if(o==="V")return["L",i,t[1]+(n?u:0)];if(o==="L")return["L",t[1]+(n?l:0),t[2]+(n?u:0)];if(o==="M")return["M",t[1]+(n?l:0),t[2]+(n?u:0)];if(o==="C")return["C"].concat(f);if(o==="S"){const y=i*2-a,m=s*2-c;return e.x1=y,e.y1=m,["C",y,m].concat(f)}else if(o==="T"){const y=i*2-(e.qx?e.qx:0),m=s*2-(e.qy?e.qy:0);return e.qx=y,e.qy=m,["Q",y,m].concat(f)}else if(o==="Q"){const[y,m]=f;return e.qx=y,e.qy=m,["Q"].concat(f)}else if(o==="Z")return["Z"];return t},se={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},_e=t=>{const e={...se},r=_(t);return E(r,(o,n,i,s)=>{e.x=i,e.y=s;const a=be(o,e);let c=At(a,e);c[0]==="C"&&c.length>7&&(r.splice(n+1,0,["C"].concat(c.slice(7))),c=c.slice(0,7));const u=c.length;return e.x1=+c[u-2],e.y1=+c[u-1],e.x2=+c[u-4]||e.x1,e.y2=+c[u-3]||e.y1,c})},ce={origin:[0,0,0],round:4},N=(t,e)=>{const r=e>=1?10**e:1;return e>0?Math.round(t*r)/r:Math.round(t)},Ct=(t,e)=>{const r=t.length;let{round:o}=ce,n=t[0],i="";o=e==="off"||typeof e=="number"&&e>=0?e:typeof o=="number"&&o>=0?o:"off";for(let s=0;s<r;s+=1){n=t[s];const[a]=n,c=n.slice(1);if(i+=a,o==="off")i+=c.join(" ");else{let l=0;const u=c.length;for(;l<u;)i+=N(c[l],o),l!==u-1&&(i+=" "),l+=1}}return i},xe=1e-5,Me=t=>{const e=_(t),r={...se};return E(e,(o,n,i,s)=>{r.x=i,r.y=s;const a=be(o,r),c=a.length;return r.x1=+a[c-2],r.y1=+a[c-1],r.x2=+a[c-4]||r.x1,r.y2=+a[c-3]||r.y1,a})},pe=(t,e)=>{const r=Me(t);let o=!1,n=[],i="M",s=0,a=0,[c,l]=r[0].slice(1);const u=typeof e=="number";let h={x:c,y:l},f=0,y=h,m=0;return!u||e<xe?h:(E(r,(d,M,p,A)=>{if([i]=d,o=i==="M",n=o?n:[p,A].concat(d.slice(1)),o?([,c,l]=d,h={x:c,y:l},f=0):i==="L"?(h=we(n[0],n[1],n[2],n[3],e-m),f=ne(n[0],n[1],n[2],n[3])):i==="A"?(h=tt(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],e-m),f=ve(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])):i==="C"?(h=mt(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],e-m),f=ye(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7])):i==="Q"?(h=ht(n[0],n[1],n[2],n[3],n[4],n[5],e-m),f=de(n[0],n[1],n[2],n[3],n[4],n[5])):i==="Z"&&(n=[p,A,c,l],h={x:c,y:l},f=ne(n[0],n[1],n[2],n[3])),[s,a]=n.slice(-2),m<e)y=h;else return!1;m+=f}),e>m-xe?{x:s,y:a}:y)},ae=t=>{const e=_(t);let r=0,o=0,n=0,i=0,s=0,a=0,c="M",l=0,u=0,h=0;return E(e,(f,y,m,d)=>{[c]=f;const M=c.toUpperCase(),A=M!==c?oe(f,y,m,d):f.slice(0),b=M==="V"?["L",m,A[1]]:M==="H"?["L",A[1],d]:A;if([c]=b,"TQ".includes(M)||(s=0,a=0),c==="M")[,l,u]=b;else if(c==="L")h+=ne(m,d,b[1],b[2]);else if(c==="A")h+=ve(m,d,b[1],b[2],b[3],b[4],b[5],b[6],b[7]);else if(c==="S"){const x=r*2-n,C=o*2-i;h+=ye(m,d,x,C,b[1],b[2],b[3],b[4])}else c==="C"?h+=ye(m,d,b[1],b[2],b[3],b[4],b[5],b[6]):c==="T"?(s=r*2-s,a=o*2-a,h+=de(m,d,s,a,b[1],b[2])):c==="Q"?(s=b[1],a=b[2],h+=de(m,d,b[1],b[2],b[3],b[4])):c==="Z"&&(h+=ne(m,d,l,u));[r,o]=c==="Z"?[l,u]:b.slice(-2),[n,i]=c==="C"?[b[3],b[4]]:c==="S"?[b[1],b[2]]:[r,o]}),h},Qe=(t,e)=>{const r=_(t);let o=r.slice(0),n=ae(o),i=o.length-1,s=0,a=0,c=r[0];if(i<=0||!e||!Number.isFinite(e))return{segment:c,index:0,length:a,lengthAtSegment:s};if(e>=n)return o=r.slice(0,-1),s=ae(o),a=n-s,c=r[i],{segment:c,index:i,length:a,lengthAtSegment:s};const l=[];for(;i>0;)c=o[i],o=o.slice(0,-1),s=ae(o),a=n-s,n=s,l.push({segment:c,index:i,length:a,lengthAtSegment:s}),i-=1;return l.find(({lengthAtSegment:u})=>u<=e)},Ae=(t,e)=>{const r=_(t),o=Me(r),n=ae(o),i=x=>{const C=x.x-e.x,S=x.y-e.y;return C*C+S*S};let s=8,a,c={x:0,y:0},l=0,u=0,h=1/0;for(let x=0;x<=n;x+=s)a=pe(o,x),l=i(a),l<h&&(c=a,u=x,h=l);s/=2;let f,y,m=0,d=0,M=0,p=0;for(;s>1e-6&&(m=u-s,f=pe(o,m),M=i(f),d=u+s,y=pe(o,d),p=i(y),m>=0&&M<h?(c=f,u=m,h=M):d<=n&&p<h?(c=y,u=d,h=p):s/=2,!(s<1e-5)););const A=Qe(r,u),b=Math.sqrt(h);return{closest:c,distance:b,segment:A}},Qt=(t,e)=>Ae(t,e).closest,Dt=(t,e,r,o,n,i,s,a)=>3*((a-e)*(r+n)-(s-t)*(o+i)+o*(t-n)-r*(e-i)+a*(n+t/3)-s*(i+e/3))/20,Pt=t=>{let e=0,r=0,o=0;return _e(t).map(n=>{switch(n[0]){case"M":return[,e,r]=n,0;default:return o=Dt(e,r,n[1],n[2],n[3],n[4],n[5],n[6]),[e,r]=n.slice(-2),o}}).reduce((n,i)=>n+i,0)},Zt=t=>Pt(_e(t))>=0,Bt=t=>{if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};const e=_(t);let r="M",o=0,n=0;const{max:i,min:s}=Math;let a=1/0,c=1/0,l=-1/0,u=-1/0,h=0,f=0,y=0,m=0,d=0,M=0,p=0,A=0,b=0,x=0;E(e,(q,$,v,T)=>{[r]=q;const Q=r.toUpperCase(),j=Q!==r?oe(q,$,v,T):q.slice(0),P=Q==="V"?["L",v,j[1]]:Q==="H"?["L",j[1],T]:j;if([r]=P,"TQ".includes(Q)||(b=0,x=0),r==="M")[,o,n]=P,h=o,f=n,y=o,m=n;else if(r==="L")[h,f,y,m]=Te(v,T,P[1],P[2]);else if(r==="A")[h,f,y,m]=nt(v,T,P[1],P[2],P[3],P[4],P[5],P[6],P[7]);else if(r==="S"){const k=d*2-p,D=M*2-A;[h,f,y,m]=$e(v,T,k,D,P[1],P[2],P[3],P[4])}else r==="C"?[h,f,y,m]=$e(v,T,P[1],P[2],P[3],P[4],P[5],P[6]):r==="T"?(b=d*2-b,x=M*2-x,[h,f,y,m]=je(v,T,b,x,P[1],P[2])):r==="Q"?(b=P[1],x=P[2],[h,f,y,m]=je(v,T,P[1],P[2],P[3],P[4])):r==="Z"&&([h,f,y,m]=Te(v,T,o,n));a=s(h,a),c=s(f,c),l=i(y,l),u=i(m,u),[d,M]=r==="Z"?[o,n]:P.slice(-2),[p,A]=r==="C"?[P[3],P[4]]:r==="S"?[P[1],P[2]]:[d,M]});const C=l-a,S=u-c;return{width:C,height:S,x:a,y:c,x2:l,y2:u,cx:a+C/2,cy:c+S/2,cz:Math.max(C,S)+Math.min(C,S)/2}},Ht=(t,e)=>Qe(t,e).segment,Ft=(t,e)=>Ae(t,e).segment,Ce=t=>Array.isArray(t)&&t.every(e=>{const r=e[0].toLowerCase();return W[r]===e.length-1&&"achlmqstvz".includes(r)&&e.slice(1).every(Number.isFinite)})&&t.length>0,St=t=>Ce(t)&&t.every(([e])=>e===e.toUpperCase()),wt=t=>St(t)&&t.every(([e])=>"ACLMQZ".includes(e)),Ut=t=>wt(t)&&t.every(([e])=>"MC".includes(e)),Gt=(t,e)=>{const{distance:r}=Ae(t,e);return Math.abs(r)<xe},Jt=t=>Ce(t)&&t.slice(1).every(([e])=>e===e.toLowerCase()),Tt=t=>{if(typeof t!="string"||!t.length)return!1;const e=new Ve(t);for(X(e);e.index<e.max&&!e.err.length;)Ie(e);return!e.err.length&&"mM".includes(e.segments[0][0])},le={line:["x1","y1","x2","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:["d"]},Lt=t=>t!=null&&typeof t=="object"&&t.nodeType===1,Kt=t=>{let{x1:e,y1:r,x2:o,y2:n}=t;return[e,r,o,n]=[e,r,o,n].map(i=>+i),[["M",e,r],["L",o,n]]},Wt=t=>{const e=[],r=(t.points||"").trim().split(/[\s|,]/).map(n=>+n);let o=0;for(;o<r.length;)e.push([o?"L":"M",r[o],r[o+1]]),o+=2;return t.type==="polygon"?[...e,["z"]]:e},Xt=t=>{let{cx:e,cy:r,r:o}=t;return[e,r,o]=[e,r,o].map(n=>+n),[["M",e-o,r],["a",o,o,0,1,0,2*o,0],["a",o,o,0,1,0,-2*o,0]]},Yt=t=>{let{cx:e,cy:r}=t,o=t.rx||0,n=t.ry||o;return[e,r,o,n]=[e,r,o,n].map(i=>+i),[["M",e-o,r],["a",o,n,0,1,0,2*o,0],["a",o,n,0,1,0,-2*o,0]]},en=t=>{const e=+t.x||0,r=+t.y||0,o=+t.width,n=+t.height;let i=+(t.rx||0),s=+(t.ry||i);return i||s?(i*2>o&&(i-=(i*2-o)/2),s*2>n&&(s-=(s*2-n)/2),[["M",e+i,r],["h",o-i*2],["s",i,0,i,s],["v",n-s*2],["s",0,s,-i,s],["h",-o+i*2],["s",-i,0,-i,-s],["v",-n+s*2],["s",0,-s,i,-s]]):[["M",e,r],["h",o],["v",n],["H",e],["Z"]]},Nt=t=>{const e=Object.keys(le),r=Lt(t),o=r?t.tagName:null;if(o&&[...e,"path"].every(c=>o!==c))throw TypeError(`${O}: "${o}" is not SVGElement`);const n=r?o:t.type,i=le[n],s={type:n};r?i.forEach(c=>{s[c]=t.getAttribute(c)}):Object.assign(s,t);let a=[];return n==="circle"?a=Xt(s):n==="ellipse"?a=Yt(s):["polyline","polygon"].includes(n)?a=Wt(s):n==="rect"?a=en(s):n==="line"?a=Kt(s):["glyph","path"].includes(n)&&(a=_(r?t.getAttribute("d")||"":t.d||"")),Ce(a)&&a.length?a:!1},tn=(t,e,r)=>{const o=r||document,n=Object.keys(le),i=Lt(t),s=i?t.tagName:null;if(s==="path")throw TypeError(`${O}: "${s}" is already SVGPathElement`);if(s&&n.every(m=>s!==m))throw TypeError(`${O}: "${s}" is not SVGElement`);const a=o.createElementNS("http://www.w3.org/2000/svg","path"),c=i?s:t.type,l=le[c],u={type:c},h=ce.round,f=Nt(t),y=f&&f.length?Ct(f,h):"";return i?(l.forEach(m=>{u[m]=t.getAttribute(m)}),Object.values(t.attributes).forEach(({name:m,value:d})=>{l.includes(m)||a.setAttribute(m,d)})):(Object.assign(u,t),Object.keys(u).forEach(m=>{!l.includes(m)&&m!=="type"&&a.setAttribute(m.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`),u[m])})),Tt(y)?(a.setAttribute("d",y),e&&i&&(t.before(a,t),t.remove()),a):!1},vt=t=>{let e=new w;const{origin:r}=t,[o,n]=r,{translate:i}=t,{rotate:s}=t,{skew:a}=t,{scale:c}=t;return Array.isArray(i)&&i.length>=2&&i.every(l=>!Number.isNaN(+l))&&i.some(l=>l!==0)?e=e.translate(...i):typeof i=="number"&&!Number.isNaN(i)&&(e=e.translate(i)),(s||a||c)&&(e=e.translate(o,n),Array.isArray(s)&&s.length>=2&&s.every(l=>!Number.isNaN(+l))&&s.some(l=>l!==0)?e=e.rotate(...s):typeof s=="number"&&!Number.isNaN(s)&&(e=e.rotate(s)),Array.isArray(a)&&a.length===2&&a.every(l=>!Number.isNaN(+l))&&a.some(l=>l!==0)?(e=a[0]?e.skewX(a[0]):e,e=a[1]?e.skewY(a[1]):e):typeof a=="number"&&!Number.isNaN(a)&&(e=e.skewX(a)),Array.isArray(c)&&c.length>=2&&c.every(l=>!Number.isNaN(+l))&&c.some(l=>l!==1)?e=e.scale(...c):typeof c=="number"&&!Number.isNaN(c)&&(e=e.scale(c)),e=e.translate(-o,-n)),e},zt=(t,e,r,o)=>{const[n]=t,{round:i}=ce,s=i,a=e.slice(1),{x1:c,y1:l,x2:u,y2:h,x:f,y}=r,[m,d]=a.slice(-2),M=t;if("TQ".includes(n)||(r.qx=null,r.qy=null),n==="L"){if(N(f,s)===N(m,s))return["V",d];if(N(y,s)===N(d,s))return["H",m]}else if(n==="C"){const[p,A]=a;if(r.x1=p,r.y1=A,"CS".includes(o)&&(N(p,s)===N(c*2-u,s)&&N(A,s)===N(l*2-h,s)||N(c,s)===N(u*2-f,s)&&N(l,s)===N(h*2-y,s)))return["S",a[2],a[3],a[4],a[5]]}else if(n==="Q"){const[p,A]=a;if(r.qx=p,r.qy=A,"QT".includes(o)&&N(p,s)===N(c*2-u,s)&&N(A,s)===N(l*2-h,s))return["T",a[2],a[3]]}return M},Pe=(t,e)=>{const r=t.slice(1).map(o=>N(o,e));return[t[0]].concat(r)},nn=(t,e)=>{const r=Re(t),o=typeof e=="number"&&e>=0?e:2,n={...se},i=[];let s="M",a="Z";return E(r,(c,l,u,h)=>{n.x=u,n.y=h;const f=be(c,n);let y=c;if([s]=c,i[l]=s,l){a=i[l-1];const d=zt(c,f,n,a),M=Pe(d,o),p=M.join(""),A=Ee(d,l,u,h),b=Pe(A,o),x=b.join("");y=p.length<x.length?M:b}const m=f.length;return n.x1=+f[m-2],n.y1=+f[m-1],n.x2=+f[m-4]||n.x1,n.y2=+f[m-3]||n.y1,y})},rn=(t,e)=>{let r=w.Translate(e[0],e[1],e[2]);return[,,,r.m44]=e,r=t.multiply(r),[r.m41,r.m42,r.m43,r.m44]},De=(t,e,r)=>{const[o,n,i]=r,[s,a,c]=rn(t,[e[0],e[1],0,1]),l=s-o,u=a-n,h=c-i;return[l*(Math.abs(i)/Math.abs(h)||1)+o,u*(Math.abs(i)/Math.abs(h)||1)+n]},on=t=>{const e=t.slice(1).map((r,o,n)=>o?n[o-1].slice(-2).concat(r.slice(1)):t[0].slice(1).concat(r.slice(1))).map(r=>r.map((o,n)=>r[r.length-n-2*(1-n%2)])).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(r=>["C"].concat(r.slice(2))))},sn=t=>{const e=Re(t),r=Me(e),o=e.length,n=e[o-1][0]==="Z",i=E(e,(s,a)=>{const c=r[a],l=a&&e[a-1],u=l&&l[0],h=e[a+1],f=h&&h[0],[y]=s,[m,d]=r[a?a-1:o-1].slice(-2);let M=s;switch(y){case"M":M=n?["Z"]:[y,m,d];break;case"A":M=[y,s[1],s[2],s[3],s[4],s[5]===1?0:1,m,d];break;case"C":h&&f==="S"?M=["S",s[1],s[2],m,d]:M=[y,s[3],s[4],s[1],s[2],m,d];break;case"S":u&&"CS".includes(u)&&(!h||f!=="S")?M=["C",c[3],c[4],c[1],c[2],m,d]:M=[y,c[1],c[2],m,d];break;case"Q":h&&f==="T"?M=["T",m,d]:M=[y,s[1],s[2],m,d];break;case"T":u&&"QT".includes(u)&&(!h||f!=="T")?M=["Q",c[1],c[2],m,d]:M=[y,m,d];break;case"Z":M=["M",m,d];break;case"H":M=[y,m];break;case"V":M=[y,d];break;default:M=[y].concat(s.slice(1,-2),m,d)}return M});return n?i.reverse():[i[0]].concat(i.slice(1).reverse())},cn=(t,e)=>{let{round:r}=ce;return r=e==="off"||typeof e=="number"&&e>=0?e:typeof r=="number"&&r>=0?r:"off",r==="off"?t.slice(0):E(t,o=>Pe(o,r))},an=(t,e=.5)=>{const r=e,o=t.slice(0,2),n=t.slice(2,4),i=t.slice(4,6),s=t.slice(6,8),a=Z(o,n,r),c=Z(n,i,r),l=Z(i,s,r),u=Z(a,c,r),h=Z(c,l,r),f=Z(u,h,r);return[["C",a[0],a[1],u[0],u[1],f[0],f[1]],["C",h[0],h[1],l[0],l[1],s[0],s[1]]]},ln=t=>{const e=[];let r,o=-1,n=0,i=0,s=0,a=0;const c={...se};return t.forEach(l=>{const[u]=l,h=u.toUpperCase(),f=u.toLowerCase(),y=u===f,m=l.slice(1);h==="M"?(o+=1,[n,i]=m,n+=y?c.x:0,i+=y?c.y:0,s=n,a=i,r=[y?[h,s,a]:l]):(h==="Z"?(n=s,i=a):h==="H"?([,n]=l,n+=y?c.x:0):h==="V"?([,i]=l,i+=y?c.y:0):([n,i]=l.slice(-2),n+=y?c.x:0,i+=y?c.y:0),r.push(l)),c.x=n,c.y=i,e[o]=r}),e},mn=(t,e)=>{let r=0,o=0,n=0,i=0,s=0,a=0,c="M";const l=_(t),u=e&&Object.keys(e);if(!e||u&&!u.length)return l.slice(0);e.origin||Object.assign(e,{origin:ce.origin});const h=e.origin,f=vt(e);return f.isIdentity?l.slice(0):E(l,(y,m,d,M)=>{[c]=y;const p=c.toUpperCase(),b=p!==c?oe(y,m,d,M):y.slice(0);let x=p==="A"?["C"].concat(ge(d,M,b[1],b[2],b[3],b[4],b[5],b[6],b[7])):p==="V"?["L",d,b[1]]:p==="H"?["L",b[1],M]:b;c=x[0];const C=c==="C"&&x.length>7,S=C?x.slice(0,7):x.slice(0);if(C&&(l.splice(m+1,0,["C"].concat(x.slice(7))),x=S),c==="L")[n,i]=De(f,[x[1],x[2]],h),r!==n&&o!==i?x=["L",n,i]:o===i?x=["H",n]:r===n&&(x=["V",i]);else for(s=1,a=x.length;s<a;s+=2)[n,i]=De(f,[+x[s],+x[s+1]],h),x[s]=n,x[s+1]=i;return r=n,o=i,x})};g.CSSMatrix=w,g.absolutizeSegment=oe,g.arcToCubic=ge,g.arcTools=It,g.bezierTools=Vt,g.cubicTools=Rt,g.distanceEpsilon=xe,g.distanceSquareRoot=ue,g.finalizeSegment=ke,g.getClosestPoint=Qt,g.getDrawDirection=Zt,g.getPathArea=Pt,g.getPathBBox=Bt,g.getPointAtLength=pe,g.getPropertiesAtLength=Qe,g.getPropertiesAtPoint=Ae,g.getSVGMatrix=vt,g.getSegmentAtLength=Ht,g.getSegmentOfPoint=Ft,g.getTotalLength=ae,g.invalidPathValue=U,g.isAbsoluteArray=St,g.isArcCommand=xt,g.isCurveArray=Ut,g.isDigit=F,g.isDigitStart=bt,g.isMoveCommand=Mt,g.isNormalizedArray=wt,g.isPathArray=Ce,g.isPathCommand=gt,g.isPointInStroke=Gt,g.isRelativeArray=Jt,g.isSpace=dt,g.isValidPath=Tt,g.iterate=E,g.lineToCubic=Oe,g.lineTools=kt,g.midPoint=Z,g.normalizePath=Me,g.normalizeSegment=be,g.optimizePath=nn,g.paramsCount=W,g.paramsParser=se,g.parsePathString=_,g.pathParser=Ve,g.pathToAbsolute=Re,g.pathToCurve=_e,g.pathToRelative=_t,g.pathToString=Ct,g.polygonTools=Ot,g.projection2d=De,g.quadToCubic=pt,g.quadTools=Et,g.relativizeSegment=Ee,g.reverseCurve=on,g.reversePath=sn,g.rotateVector=ie,g.roundPath=cn,g.roundSegment=Pe,g.roundTo=N,g.scanFlag=ft,g.scanParam=yt,g.scanSegment=Ie,g.segmentToCubic=At,g.shapeParams=le,g.shapeToPath=tn,g.shapeToPathArray=Nt,g.shortenSegment=zt,g.skipSpaces=X,g.splitCubic=an,g.splitPath=ln,g.transformPath=mn,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=util.js.map
